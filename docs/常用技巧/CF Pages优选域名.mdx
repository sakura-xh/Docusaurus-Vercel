# CF Pages 优选域名

## 前言

上次研究了半天的 Saas 回源，结果发现那玩意有个天生的毛病，首先是因为最后解析到服务的需要是一个走了代理(小黄云)的 A 或者 CNAME 记录，但是我需要指向的 Pages 本来就是走的 CF 的 CDN，所以显得不合理，双重代理下会报错 522，不挂代理又无法使用回源域名，所以最后上网找了半天发现压根不用这么麻烦

## 操作流程

准备一个域名，是不是 CF 托管的都行，DNSPod 托管的最好，因为可以使用境内境外分流，更方便获取合适的 CDN 节点

然后先去 Pages 页面的自定义域部分，添加一个子域名指向 Pages 的 dev 地址，然后去 DNSPod 添加 CNAME 记录，将子域名指向 Pages 的地址，然后等待 CF 验证 DNS 记录完成，签发 SSL 证书，然后使用新的域名去访问 Pages，如果能正常访问且证书没有问题，那就去 DNSPod，将刚才指向 Pages 的地址的 CNAME 记录修改一下，将指向的地址修改成优选域名，然后等待 DNS 解析记录更新，此时再去访问这个域名会发现还是能够跳转到之前设定的 Pages 页面并且无代理的情况下访问速度要更快

这里我使用的优选域名是由 CMLiussss 维护的三网自动分流的优选域名

```
cf.090227.xyz#三网自适应分流官方优选
ct.090227.xyz#电信官方优选
cmcc.090227.xyz#移动官方优选
```

还有很多优秀的优选域名的地址可以自行寻找